import{d as E,G as I,o as T,w as m,y as C,u,P as A,H as U,j as v,a as D}from"./app-CsL5EtUN.js";import{c as N,a as G,u as L}from"./Collection-DBxlOl9V.js";import{u as M}from"./useForwardExpose-Cmrp_S1r.js";const q=E({__name:"VisuallyHidden",props:{feature:{default:"focusable"},asChild:{type:Boolean},as:{default:"span"}},setup(e){return(t,a)=>(T(),I(u(A),{as:t.as,"as-child":t.asChild,"aria-hidden":t.feature==="focusable"?"true":void 0,"data-hidden":t.feature==="fully-hidden"?"":void 0,tabindex:t.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:m(()=>[C(t.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}});function F(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}const V="rovingFocusGroup.onEntryFocus",$={bubbles:!1,cancelable:!0},k={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function H(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function J(e,t,a){const o=H(e.key,a);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return k[o]}function K(e,t=!1){const a=F();for(const o of e)if(o===a||(o.focus({preventScroll:t}),F()!==a))return}function Q(e,t){return e.map((a,o)=>e[(t+o)%e.length])}const[X,Y]=N("RovingFocusGroup"),Z=E({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:t,emit:a}){const o=e,h=a,{loop:S,orientation:w,dir:y}=U(o),b=G(y),c=M(o,"currentTabStopId",h,{defaultValue:o.defaultCurrentTabStopId,passive:o.currentTabStopId===void 0}),l=v(!1),d=v(!1),f=v(0),{getItems:g,CollectionSlot:R}=L({isProvider:!0});function _(n){const s=!d.value;if(n.currentTarget&&n.target===n.currentTarget&&s&&!l.value){const i=new CustomEvent(V,$);if(n.currentTarget.dispatchEvent(i),h("entryFocus",i),!i.defaultPrevented){const p=g().map(r=>r.ref).filter(r=>r.dataset.disabled!==""),P=p.find(r=>r.getAttribute("data-active")===""),B=p.find(r=>r.id===c.value),x=[P,B,...p].filter(Boolean);K(x,o.preventScrollOnEntryFocus)}}d.value=!1}function O(){setTimeout(()=>{d.value=!1},1)}return t({getItems:g}),Y({loop:S,dir:b,orientation:w,currentTabStopId:c,onItemFocus:n=>{c.value=n},onItemShiftTab:()=>{l.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(n,s)=>(T(),I(u(R),null,{default:m(()=>[D(u(A),{tabindex:l.value||f.value===0?-1:0,"data-orientation":u(w),as:n.as,"as-child":n.asChild,dir:u(b),style:{outline:"none"},onMousedown:s[0]||(s[0]=i=>d.value=!0),onMouseup:O,onFocus:_,onBlur:s[1]||(s[1]=i=>l.value=!1)},{default:m(()=>[C(n.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});export{q as _,F as a,Z as b,K as f,J as g,X as i,Q as w};
